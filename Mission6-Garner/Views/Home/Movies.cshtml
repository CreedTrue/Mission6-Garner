@model Movie

@{
    ViewData["Title"] = "Movies";
}

<h1>Movies</h1>

<h4>Add Movies to the Database</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <!--This is the Movie Creation form for the database-->
        <form method="post">
            <div class="form-group">

                <input type="hidden" asp-for="MovieId" />
                
                <label asp-for="CategoryId">Category:</label>
                <select asp-for="CategoryId">
                    <option value="">Please select a Category</option>
                    @foreach (Category c in ViewBag.Categories)
                    {
                        <option value="@c.CategoryId">@c.CategoryName</option>
                    }
                </select>
                <br />
                <label asp-for="Title">Title:</label>
                <input asp-for="Title" required/>
                <br />
                <label asp-for="Year">Year:</label>
                <input asp-for="Year" min="1888" required/>
                <br />
                <label asp-for="Director">Director:</label>
                <input asp-for="Director"/>
                <br />
                <label asp-for="Rating">Rating:</label>
                <select asp-for="Rating">
                    <option value="" hidden disabled selected>Please select an option</option>
                    <option value="G">G</option>
                    <option value="NR">NR</option>
                    <option value="PG">PG</option>
                    <option value="PG-13">PG-13</option>
                    <option value="R">R</option>
                    <option value="R?">R?</option>
                    <option value="TV-14">TV-14</option>
                    <option value="TV-G">TV-G</option>
                    <option value="TV-PG">TV-PG</option>
                    <option value="TV-Y7">TV-Y7</option>
                    <option value="UR">UR</option>
                </select>
                <br />
                <label asp-for="Edited">Edited:</label>
                <input type="checkbox" id="EditedCheckbox" asp-for="Edited" />
                <input type="hidden" asp-for="Edited" />
                <br />
                <label asp-for="LentTo">Lent To:</label>
                <input asp-for="LentTo" />
                <br />
                <label asp-for="CopiedToPlex">Copied to Plex:</label>
                <input type="checkbox" id="CopiedToPlexCheckbox" asp-for="CopiedToPlex" />
                <input type="hidden" asp-for="CopiedToPlex" />
                <br />
                <label asp-for="Notes">Notes:</label>
                <input asp-for="Notes" />
                <br />
                <button type="submit" class="btn btn-primary">Submit</button>

                <div asp-validation-summary="All"></div>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <!-- This script is used to update the hidden input field when the checkbox is checked or unchecked -->
    <script>
        var checkbox = document.getElementById('EditedCheckbox');
        var hiddenInput = document.querySelector('input[name="Edited"]');

        checkbox.addEventListener('change', function() {
            hiddenInput.value = this.checked ? 'true' : 'false';
        });
    </script>
}
